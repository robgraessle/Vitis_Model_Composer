
<html>
<head>
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<h1 id="digital-upconversion-duc">Digital Upconversion (DUC)</h1>
<html>    
<script>
function myFunction() {

var path = document.location.pathname;
var directory1 = path.substring(path.indexOf('/'), path.lastIndexOf('/'));
var directory = directory1.substring(directory1.lastIndexOf('/')+1); 

commandURI="matlab:XmcExampleApi.openExample('" + directory + "');"

document.location=commandURI
}
</script>
<noscript>Sorry, your browser does not support JavaScript!</noscript>
       
<button type="button" style="background-color:#d0d028; font-size: 20px;" onclick="myFunction()">Open Design</button>  
              
</html>
<h2 id="introduction">Introduction</h2>
<p>This example demonstrates a Digital Upconversion (DUC) algorithm implemented on Programmable Logic using AMD IP blocks.</p>
<h2 id="algorithm">Algorithm</h2>
<p>The DUC design consists of multi-stage finite impulse rate (FIR) filters, a direct digital synthesizer (DDS) and a mixer. </p>
<p><img src="./Images/duc_block_diagram.png" alt="" /> </p>
<p>The DUC specification is as follows:</p>
<ul>
<li>4 stages of FIR filter, with interpolation ratio of 2 in each stage and an overall interpolation ratio of 16.</li>
<li>The first stage is a 64 tap square raised root cosine (SRRC) filter, and the next three stage filters are half-band (HB) interpolate by 2 FIR filters. </li>
</ul>
<h2 id="example-model">Example Model</h2>
<p>The example model compares a Simulink implementation of the DUC with an HDL implementation.</p>
<p><img src="./Images/model.png" alt="" /> </p>
<p>The input to both designs is a 1 MHz complex sinusoid with a sample rate of 25 MSPS.</p>
<p><img src="./Images/input_signal.png" alt="" /> </p>
<h3 id="simulink-reference-design">Simulink Reference Design</h3>
<p>In the reference design, the 4 filter stages are implemented with Simulink's <strong>FIR Interpolation</strong> block.</p>
<p><img src="./Images/simulink_reference.png" alt="" /> </p>
<p>The <strong>Gain</strong> blocks between each stage control bit growth and ensure that the input to each filter is 32 bits.</p>
<p>The floating-point coefficients for each filter are stored in the MATLAB variables  <code>srrc</code>, <code>hb1</code>, <code>hb2</code>, and <code>hb3</code>. </p>
<h3 id="pl-duc-design">PL DUC Design</h3>
<p>The PL design is implemented using the FIR Compiler, DDS Compiler, and Complex Multiplier blocks from the <strong>HDL/DSP/AXI-S</strong> library.</p>
<p><img src="./Images/pl_model.png" alt="" /> </p>
<p>The <strong>Shift</strong> blocks between each stage control bit growth and ensure that the input to each filter is 17 bits.</p>
<p>The fixed-point coefficients for each filter are stored in the MATLAB variables  <code>srrc_coeff</code>, <code>hb1_coeff</code>, <code>hb2_coeff</code>, and <code>hb3_coeff</code>. The coefficients are quantized to fit in the 17 bit coefficient width specified by the FIR Compiler blocks. Refer to <code>coeffs_scaling.m</code> to see the original (Simulink floating-point) coefficients and how they are quantized to 17 bits for PL implementation.</p>
<h2 id="results">Results</h2>
<h3 id="duc-output">DUC Output</h3>
<p>The DUC upconverts the 1 MHz complex sinusoid with a sample rate of 25 MSPS to a 80 MHz signal with a sample rate of 400 MSPS. The PL implementation is compared to the Simulink golden reference model.</p>
<p><img src="./Images/duc_output.png" alt="" /> </p>
<h3 id="hardware-implementation">Hardware Implementation</h3>
<p>In the <strong>Vitis Model Composer Hub</strong> block, the selected hardware is a Versal VCK190 evaluation platform. This board contains a Versal AI Core <code>xcvc1902-vsva2197-2MP-e-S</code> part with <code>-2MP</code> speed grade.</p>
<p><img src="./Images/hub2.png" alt="" /> </p>
<p>Also note on the <strong>Code Generation->Settings</strong> tab that the design is configured for an FPGA clock period of 1.25 ns (rate of 800 MHz). This clock constraint will be passed to Vivado for implementation.</p>
<p><img src="./Images/hub1.png" alt="" /> </p>
<h3 id="timing-closure">Timing Closure</h3>
<p>To determine whether or not the design will meet timing, run Timing Analysis from the <strong>Analyze</strong> tab. After running Vivado Synthesis and Implementation, the <strong>Timing Analyzer</strong> window will display the post implementation critical paths of the design.</p>
<p><img src="./Images/timing_analyzer.png" alt="" /> </p>
<p>The analysis indicates the most critical path fails to meet 800 MHz timing by 10 ps. This effectively meets timing due to conservative timing estimates in the speed files that describe the Versal AI Core device.</p>
<h3 id="resource-utilization">Resource Utilization</h3>
<p>To determine the FPGA resources the design will use, run Resource Analysis from the <strong>Analyze</strong> tab. After running Vivado Synthesis and Implementation, the <strong>Resource Analyzer</strong> window will show the various resources (URAM, BRAM, DSP, LUT, registers) used by each component of the design.</p>
<p><img src="./Images/resource_analyzer.png" alt="" /> </p>
<p>The architecture (17 bit inputs and 17 bit coefficients) of each filter allows them to map to the dedicated <a href="https://docs.amd.com/r/en-US/ug1485-versal-architecture-premium-series-libraries/DSP58">DSP58</a> resources in the Versal device. </p>
<h2 id="conclusion">Conclusion</h2>
<p>AMD PL IP blocks, accessible in Vitis Model Composer, can be used to implement high performance signal processing algorithms, including Digital Upconversion (DUC). Vitis Model Composer can be used to analyze their timing and resource requirements.</p>
<hr />
<p>Copyright (c) 2024 Advanced Micro Devices, Inc.</p>

</div>
<style type='text/css'>body {
font: 400 16px/1.5 "Helvetica Neue", Helvetica, Arial, sans-serif;
color: #111;
background-color: #fdfdfd;
-webkit-text-size-adjust: 100%;
-webkit-font-feature-settings: "kern" 1;
-moz-font-feature-settings: "kern" 1;
-o-font-feature-settings: "kern" 1;
font-feature-settings: "kern" 1;
font-kerning: normal;
padding: 30px;
}

@media only screen and (max-width: 600px) {
body {
padding: 5px;
}

body > #content {
padding: 0px 20px 20px 20px !important;
}
}

body > #content {
margin: 0px;
max-width: 900px;
border: 1px solid #e1e4e8;
padding: 10px 40px;
padding-bottom: 20px;
border-radius: 2px;
margin-left: auto;
margin-right: auto;
}

hr {
color: #bbb;
background-color: #bbb;
height: 1px;
flex: 0 1 auto;
margin: 1em 0;
padding: 0;
border: none;
}

/**
* Links
*/
a {
color: #0366d6;
text-decoration: none; }
a:visited {
color: #0366d6; }
a:hover {
color: #0366d6;
text-decoration: underline; }

pre {
background-color: #f6f8fa;
border-radius: 3px;
font-size: 85%;
line-height: 1.45;
overflow: auto;
padding: 16px;
}

/**
* Code blocks
*/

code {
background-color: rgba(27,31,35,.05);
border-radius: 3px;
font-size: 85%;
margin: 0;
word-wrap: break-word;
padding: .2em .4em;
font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
}

pre > code {
background-color: transparent;
border: 0;
display: inline;
line-height: inherit;
margin: 0;
overflow: visible;
padding: 0;
word-wrap: normal;
font-size: 100%;
}


/**
* Blockquotes
*/
blockquote {
margin-left: 30px;
margin-top: 0px;
margin-bottom: 16px;
border-left-width: 3px;
padding: 0 1em;
color: #828282;
border-left: 3px solid #e8e8e8;
padding-left: 15px;
font-size: 18px;
letter-spacing: -1px;
font-style: italic;
}
blockquote * {
font-style: normal !important;
letter-spacing: 0;
color: #6a737d !important;
}

/**
* Tables
*/
table {
border-spacing: 2px;
display: block;
font-size: 14px;
overflow: auto;
width: 100%;
margin-bottom: 16px;
border-spacing: 0;
border-collapse: collapse;
}

td {
padding: 6px 13px;
border: 1px solid #dfe2e5;
}

th {
font-weight: 600;
padding: 6px 13px;
border: 1px solid #dfe2e5;
}

tr {
background-color: #fff;
border-top: 1px solid #c6cbd1;
}

table tr:nth-child(2n) {
background-color: #f6f8fa;
}

/**
* Others
*/

img {
max-width: 100%;
}

p {
line-height: 24px;
font-weight: 400;
font-size: 16px;
color: #24292e; }

ul {
margin-top: 0; }

li {
color: #24292e;
font-size: 16px;
font-weight: 400;
line-height: 1.5; }

li + li {
margin-top: 0.25em; }

* {
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
color: #24292e; }

a:visited {
color: #0366d6; }

h2, h3 {
border-bottom: 1px solid #eaecef;
color: #111;
/* Darker */ }

h1 {
color: black;
border-bottom: 1px solid #eaecef;
}
</style>
</body>
</html>
